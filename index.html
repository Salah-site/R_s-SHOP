<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø´Ø­Ù†</title>
  <style>
    :root{
      --bg:#07080a;
      --card:#0f1720;
      --muted:#94a3b8;
      --accent:#06b6d4;
      --accent-2:#38bdf8;
      --success:#16a34a;
      --danger:#ef4444;
      --glass:rgba(255,255,255,0.03);
      --glass-2:rgba(255,255,255,0.02);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter, system-ui, Arial, "Segoe UI", "Noto Sans Arabic";
      background:linear-gradient(180deg,#03050a 0%, #071024 100%);
      color:#e6eef8; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      -webkit-text-size-adjust:100%;
    }

    header{
      padding:18px 20px;display:flex;align-items:center;justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,0.03);backdrop-filter:blur(4px);
    }
    .logo{display:flex;gap:12px;align-items:center}
    .logo .mark{
      width:52px;height:52px;border-radius:12px;
      background:linear-gradient(135deg,#051428,#082033);
      display:flex;align-items:center;justify-content:center;font-weight:800;
      color:var(--accent);font-size:22px;box-shadow:0 6px 18px rgba(3,10,20,0.6);
    }
    h1{margin:0;font-size:20px}
    .note{font-size:13px;color:var(--muted)}
    nav{display:flex;gap:10px;align-items:center}
    nav button{
      background:transparent;border:1px solid rgba(255,255,255,0.04);
      color:var(--muted);padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700;
    }

    main{max-width:1100px;margin:28px auto;padding:0 18px}
    .sections{display:grid;grid-template-columns:1fr;gap:18px}
    .section{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
      border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 6px 24px rgba(2,6,23,0.6);
    }
    .section h2{margin:0 0 8px 0;color:#fff}

    .products{display:flex;flex-wrap:wrap;gap:12px}
    .prod{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:14px;border-radius:12px;width:260px;border:1px solid rgba(255,255,255,0.02);
      display:flex;flex-direction:column;gap:10px;transition:transform .18s ease, box-shadow .18s ease;
    }
    .prod:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,6,23,0.6)}
    .prod img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .prod .title{font-weight:800}
    .prod .price{font-weight:800;color:var(--accent);}
    .actions{display:flex;gap:8px;margin-top:auto}
    .btn{padding:10px;border-radius:8px;border:none;cursor:pointer;font-weight:800}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041226;box-shadow:0 8px 24px rgba(6,182,212,0.08)}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

    /* cart button */
    .cart-btn{position:fixed;left:18px;bottom:18px;background:linear-gradient(180deg,var(--accent-2),var(--accent));
      color:#051024;padding:14px;border-radius:50%;box-shadow:0 10px 30px rgba(6,182,212,0.12);cursor:pointer;z-index:9999;border:none;font-size:18px}
    /* cart side */
    .cart-side{
      position:fixed;left:0;top:0;bottom:0;width:380px;background:linear-gradient(180deg,#071428,#041425);
      transform:translateX(-110%);transition:transform .34s cubic-bezier(.2,.9,.2,1);
      box-shadow:8px 0 30px rgba(2,6,23,0.6);padding:18px;z-index:9998;border-right:1px solid rgba(255,255,255,0.03);
      display:flex;flex-direction:column;
    }
    .cart-side.open{transform:translateX(0)}
    .cart-item{display:flex;gap:12px;align-items:center;border-bottom:1px solid rgba(255,255,255,0.03);padding:12px 0}
    .cart-item img{width:64px;height:64px;border-radius:10px;object-fit:cover}
    .cart-footer{margin-top:auto}
    .small-note{font-size:13px;color:var(--muted)}

    /* modal */
    .modal{
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
      background:rgba(2,6,23,0.6);z-index:10000;opacity:0;pointer-events:none;transition:opacity .22s ease;
    }
    .modal.open{opacity:1;pointer-events:auto}
    .dialog{
      background:linear-gradient(180deg,#071828,#041123);
      padding:18px;border-radius:14px;width:520px;max-width:94%;border:1px solid rgba(255,255,255,0.04);color:#e6eef8;
      transform:translateY(12px);transition:transform .26s cubic-bezier(.2,.9,.2,1), box-shadow .22s;
      box-shadow:0 18px 40px rgba(2,6,23,0.6);
    }
    .modal.open .dialog{transform:translateY(0)}
    .dialog h3{margin:0 0 8px 0;font-size:18px}
    .input, select, textarea{
      width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:15px;
    }
    label{display:block;margin-bottom:6px;font-weight:800}
    .field{margin-bottom:12px}

    footer{padding:18px;text-align:center;color:var(--muted);margin-top:20px}
    @media(max-width:740px){ .products{justify-content:center} .prod{width:100%} .cart-side{width:100%} .dialog{width:94%} }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>emailjs.init('H1UCQ3TNmVxTTUxaJ');</script>
</head>
<body>
<header>
  <div class="logo">
    <div class="mark">S</div>
    <div>
      <h1>Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø´Ø­Ù†</h1>
      <div class="note">Ø¹Ø±ÙˆØ¶ Ø¢Ù…Ù†Ø© ÙˆØ³Ø±ÙŠØ¹Ø©</div>
    </div>
  </div>
  <nav>
    <button id="openAccounts">Ø­Ø³Ø§Ø¨Ø§Øª</button>
    <button id="openDiscord">Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</button>
  </nav>
</header>

<main>
  <div class="sections">
    <section class="section" id="tiktokSection">
      <h2>Ù‚Ø³Ù… Ø´Ø­Ù† ØªÙŠÙƒ ØªÙˆÙƒ</h2>
      <div class="products">
        <div class="prod" data-id="tt-coins">
          <img src="https://i.pinimg.com/1200x/24/ee/ed/24eeedde0b8d46721790c6da4a50b1a3.jpg" alt="Ø¹Ù…Ù„Ø§Øª ØªÙŠÙƒ ØªÙˆÙƒ">
          <div class="title">Ø¹Ù…Ù„Ø§Øª ØªÙŠÙƒ ØªÙˆÙƒ</div>
          <div class="small-note">Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©</div>
          <div class="price">20 Ø¹Ù…Ù„Ø© â€” 150 Ø¯.Ø¬</div>
          <div class="actions"><button class="btn btn-primary order-btn" data-product="coins">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</button></div>
        </div>

        <div class="prod" data-id="tt-followers">
          <img src="https://i.pinimg.com/736x/a8/87/0c/a8870c90c6302822beefe6795de9ca93.jpg" alt="Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ">
          <div class="title">Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ</div>
          <div class="small-note">100 Ù…ØªØ§Ø¨Ø¹ â€” 300 Ø¯.Ø¬ (Ø®ØµÙ…: 1000 Ù…ØªØ§Ø¨Ø¹ = 2500 Ø¯.Ø¬)</div>
          <div class="price">Ø§Ø¨Ø¯Ø£ Ù…Ù† 100 Ù…ØªØ§Ø¨Ø¹</div>
          <div class="actions"><button class="btn btn-primary order-btn" data-product="followers">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</button></div>
        </div>

        <div class="prod" data-id="tt-views">
          <img src="https://i.pinimg.com/736x/54/47/b1/5447b18f3ff226459b66481a3a684808.jpg" alt="Ù…Ø´Ø§Ù‡Ø¯ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ">
          <div class="title">Ù…Ø´Ø§Ù‡Ø¯ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ</div>
          <div class="small-note">1000 Ù…Ø´Ø§Ù‡Ø¯Ø© â€” 100 Ø¯.Ø¬ (Ø®ØµÙ…: 5000 Ù…Ø´Ø§Ù‡Ø¯Ø© = 500 Ø¯.Ø¬)</div>
          <div class="price">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª</div>
          <div class="actions"><button class="btn btn-primary order-btn" data-product="views">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</button></div>
        </div>
      </div>
    </section>

    <section class="section" id="discordSection">
      <h2>Ù‚Ø³Ù… Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</h2>
      <div class="products">
        <div class="prod" data-id="dc-nitro-plus">
          <img src="https://i.pinimg.com/1200x/cb/78/c0/cb78c09f3e7c9a41fe174ca2b5251b8a.jpg" alt="Nitro Plus">
          <div class="title">Ù†ÙŠØªØ±Ùˆ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ (Ø´Ù‡Ø± + Ø¶Ù…Ø§Ù†)</div>
          <div class="price">Ø§Ù„Ø³Ø¹Ø±: 2500 Ø¯.Ø¬</div>
          <div class="actions"><button class="btn btn-primary add-cart" data-id="nitro-plus" data-price="2500">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</button></div>
        </div>

        <div class="prod" data-id="dc-nitro-basic">
          <img src="https://i.pinimg.com/1200x/35/33/87/353387addd7df0773560eba61a765820.jpg" alt="Nitro Basic">
          <div class="title">Ù†ÙŠØªØ±Ùˆ Ø¨ÙŠØ³Ùƒ</div>
          <div class="price">Ø§Ù„Ø³Ø¹Ø±: 1200 Ø¯.Ø¬</div>
          <div class="actions"><button class="btn btn-primary add-cart" data-id="nitro-basic" data-price="1200">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</button></div>
        </div>

        <div class="prod" data-id="dc-accounts">
          <img src="https://i.pinimg.com/736x/ed/cb/56/edcb56a35853c07a7ba6348343470526.jpg" alt="Ø­Ø³Ø§Ø¨Ø§Øª Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯">
          <div class="title">Ø­Ø³Ø§Ø¨Ø§Øª Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</div>
          <div class="small-note">Ø§Ø®ØªØ± Ø¹Ù…Ø± Ø§Ù„Ø­Ø³Ø§Ø¨</div>
          <div class="price">Ø§Ø¨ØªØ¯Ø§Ø¡Ù‹ Ù…Ù† 1000 Ø¯.Ø¬ Ù„Ù„Ø³Ù†Ø©</div>
          <div class="actions"><button class="btn btn-primary order-btn" data-product="discord-account">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</button></div>
        </div>
      </div>
    </section>

  </div>
</main>

<!-- Cart Button & Side -->
<button id="cartBtn" class="cart-btn" title="Ø§Ù„Ø³Ù„Ø©">ğŸ›’</button>

<aside id="cartSide" class="cart-side" aria-hidden="true">
  <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
    <strong style="font-size:16px">Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</strong>
    <button id="closeCart" style="background:none;border:none;color:var(--danger);font-size:20px;cursor:pointer">âœ•</button>
  </header>

  <div id="cartBody" style="margin-top:6px;max-height:54vh;overflow:auto"></div>

  <div class="cart-footer" style="margin-top:12px;border-top:1px dashed rgba(255,255,255,0.04);padding-top:12px">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:800">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</div>
      <div id="cartTotal" style="font-weight:900;color:var(--accent)">0 Ø¯.Ø¬</div>
    </div>
    <div style="display:flex;gap:8px;margin-top:10px">
      <button id="checkout" style="flex:1;padding:12px;border-radius:10px;border:none;background:var(--success);color:#02120a;font-weight:900;cursor:pointer">
        Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯ÙØ¹
      </button>
      <button id="openPayInline" class="btn-ghost" style="padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);cursor:pointer">
        Ø¹Ø±Ø¶
      </button>
    </div>
    <!-- Ù…ÙƒØ§Ù† Ø²Ø± ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© -->
    <div id="clearSlot" style="margin-top:10px"></div>
  </div>
</aside>

<!-- Generic modal for product options -->
<div id="productModal" class="modal" aria-hidden="true">
  <div class="dialog" role="dialog" aria-modal="true">
    <button id="closeModal" style="float:left;background:none;border:none;color:var(--danger);font-size:22px;cursor:pointer">âœ•</button>
    <h3 id="modalTitle">Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬</h3>
    <img id="modalImg" src="" alt="" style="width:100%;height:160px;object-fit:cover;border-radius:8px;margin:8px 0">
    <div id="modalBody"></div>
    <div style="margin-top:12px;display:flex;gap:8px">
      <button id="confirmAdd" class="btn btn-primary">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
      <button id="cancel" class="btn btn-ghost">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<!-- ğŸ’³ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
<div id="payModal" class="modal" aria-hidden="true">
  <div class="dialog" style="max-width:620px">
    <button onclick="closePayModal()" style="float:left;background:none;border:none;color:var(--danger);font-size:22px;cursor:pointer">âœ•</button>
    <h3 style="text-align:center;margin-bottom:6px">Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ø¯ÙØ¹</h3>
    <p class="small-note" style="text-align:center;margin-top:0;margin-bottom:12px">Ø¹Ø¨Ù‘ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø´ Ù†ÙƒÙ…Ù„ÙˆØ§ Ø§Ù„Ø·Ù„Ø¨ â€” ÙƒÙ„Ø´ Ù…Ø±ØªØ¨ ÙˆÙˆØ§Ø¶Ø­ ğŸ‘‡</p>

    <form id="payForm" style="display:flex;flex-direction:column;gap:8px;margin-top:6px;">
      <div class="field">
        <label>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</label>
        <input class="input" name="name" id="userName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
      </div>

      <div class="field">
        <label>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
        <input class="input" name="email" id="userEmail" type="email" placeholder="example@mail.com" required>
      </div>

      <div class="field">
        <label>ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>
        <select class="input" name="method" id="payMethod" required>
          <option value="">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</option>
          <option value="Flexy">ÙÙ„ÙŠÙƒØ³ÙŠ</option>
          <option value="CCP">CCP</option>
        </select>
      </div>

      <div class="field">
        <label>ğŸ›ï¸ Ø§Ù„Ù…Ù†ØªØ¬:</label>
        <textarea id="prodName" class="input" rows="2" readonly></textarea>
      </div>

      <div class="field">
        <label>ğŸ’° Ø§Ù„Ø³Ø¹Ø±:</label>
        <input id="prodPrice" class="input" readonly>
      </div>

      <div style="display:flex;gap:8px;margin-top:6px">
        <button type="submit" style="flex:1;padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041226;font-weight:900;cursor:pointer">
          Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
        </button>
        <button type="button" onclick="closePayModal()" class="btn btn-ghost" style="padding:12px;border-radius:10px">Ø¥Ù„ØºØ§Ø¡</button>
      </div>
    </form>
  </div>
</div>

<footer>Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø´Ø­Ù†</footer>

<script>
/* ====== ÙƒÙˆØ¯ Ø§Ù„Ø³Ù„Ø© ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© ====== */
let cart = JSON.parse(localStorage.getItem('best_offers_cart')||'{}');
const q = s => document.querySelector(s);

function formatPrice(v){ 
  // Ø¹Ø±Ø¶ Ø±Ù‚Ù…ÙŠ Ø¹Ø±Ø¨ÙŠ Ø¨Ø³ÙŠØ·
  try{ return Number(v).toLocaleString('ar-EG') + ' Ø¯.Ø¬'; }
  catch(e){ return v + ' Ø¯.Ø¬'; }
}

function renderCart(){
  const body = q('#cartBody'); body.innerHTML='';
  const items = Object.values(cart);
  if(items.length===0){
    body.innerHTML = '<div style="color:var(--muted);padding:12px;text-align:center">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>';
    q('#cartTotal').textContent='0 Ø¯.Ø¬';
    q('#cartBtn').textContent = 'ğŸ›’';
    return;
  }
  let total = 0;
  items.forEach(it=>{
    total += it.price * it.qty;
    const el = document.createElement('div'); el.className='cart-item';
    el.innerHTML = `
      <img src="${it.img}" alt="${it.title}">
      <div style="flex:1;text-align:left">
        <div style="font-weight:800">${it.title}</div>
        <div class="small-note">${formatPrice(it.price)} Ã— ${it.qty}</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:6px;align-items:center">
        <button style="background:none;border:none;color:var(--accent);cursor:pointer;font-weight:800" data-id="${it.id}" data-action="inc">+</button>
        <div class="small-note">${it.qty}</div>
        <button style="background:none;border:none;color:var(--danger);cursor:pointer;font-weight:800" data-id="${it.id}" data-action="dec">âˆ’</button>
      </div>
    `;
    body.appendChild(el);
  });
  q('#cartTotal').textContent = formatPrice(total);
  q('#cartBtn').textContent = 'ğŸ›’ ' + Object.values(cart).reduce((s,i)=>s+i.qty,0);
  localStorage.setItem('best_offers_cart', JSON.stringify(cart));
}

/* add to cart helper */
function addToCartItem(id, title, price, img, qty=1){
  if(cart[id]) cart[id].qty += qty; else cart[id] = {id, title, price:Number(price), img, qty};
  renderCart();
}

/* increment/decrement handlers */
q('#cartBody').addEventListener('click', function(e){
  const btn = e.target.closest('button');
  if(!btn) return;
  const id = btn.dataset.id;
  const action = btn.dataset.action;
  if(!id || !action) return;
  if(action === 'inc'){ cart[id].qty += 1; renderCart(); }
  if(action === 'dec'){ cart[id].qty -= 1; if(cart[id].qty <= 0) delete cart[id]; renderCart(); }
});

/* open/close cart */
q('#cartBtn').addEventListener('click', ()=>{ q('#cartSide').classList.add('open'); q('#cartSide').setAttribute('aria-hidden','false'); });
q('#closeCart').addEventListener('click', ()=>{ q('#cartSide').classList.remove('open'); q('#cartSide').setAttribute('aria-hidden','true'); });

/* direct add buttons (discord nitro) */
document.querySelectorAll('.add-cart').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const id = btn.dataset.id;
    const price = Number(btn.dataset.price);
    const prod = btn.closest('.prod');
    const title = prod.querySelector('.title').textContent;
    const img = prod.querySelector('img').src;
    addToCartItem(id, title, price, img, 1);
    q('#cartSide').classList.add('open'); q('#cartSide').setAttribute('aria-hidden','false');
  });
});

/* product modal logic */
const productModal = q('#productModal');
const modalTitle = q('#modalTitle');
const modalImg = q('#modalImg');
const modalBody = q('#modalBody');
let currentProduct = null;

function openProductModal(productKey){
  currentProduct = productKey;
  modalBody.innerHTML = '';
  if(productKey === 'coins'){
    modalTitle.textContent = 'Ø¹Ù…Ù„Ø§Øª ØªÙŠÙƒ ØªÙˆÙƒ';
    modalImg.src = 'https://i.pinimg.com/1200x/24/ee/ed/24eeedde0b8d46721790c6da4a50b1a3.jpg';
    modalBody.innerHTML = `
      <div class="small-note">Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ©:</div>
      <select id="qtySelect" class="input">
        <option value="20" data-price="150">20 Ø¹Ù…Ù„Ø© â€” 150 Ø¯.Ø¬</option>
        <option value="50" data-price="320">50 Ø¹Ù…Ù„Ø© â€” 320 Ø¯.Ø¬</option>
        <option value="100" data-price="600">100 Ø¹Ù…Ù„Ø© â€” 600 Ø¯.Ø¬</option>
      </select>`;
  } else if(productKey === 'followers'){
    modalTitle.textContent = 'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ';
    modalImg.src = 'https://i.pinimg.com/736x/a8/87/0c/a8870c90c6302822beefe6795de9ca93.jpg';
    modalBody.innerHTML = `
      <div class="small-note">Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ©:</div>
      <select id="qtySelect" class="input">
        <option value="100" data-price="300">100 Ù…ØªØ§Ø¨Ø¹ â€” 300 Ø¯.Ø¬</option>
        <option value="500" data-price="1400">500 Ù…ØªØ§Ø¨Ø¹ â€” 1400 Ø¯.Ø¬</option>
        <option value="1000" data-price="2500">1000 Ù…ØªØ§Ø¨Ø¹ â€” 2500 Ø¯.Ø¬ (Ø®ØµÙ…)</option>
      </select>`;
  } else if(productKey === 'views'){
    modalTitle.textContent = 'Ù…Ø´Ø§Ù‡Ø¯ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ';
    modalImg.src = 'https://i.pinimg.com/736x/54/47/b1/5447b18f3ff226459b66481a3a684808.jpg';
    modalBody.innerHTML = `
      <div class="small-note">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª:</div>
      <select id="qtySelect" class="input">
        <option value="1000" data-price="100">1000 Ù…Ø´Ø§Ù‡Ø¯Ø© â€” 100 Ø¯.Ø¬</option>
        <option value="3000" data-price="280">3000 Ù…Ø´Ø§Ù‡Ø¯Ø© â€” 280 Ø¯.Ø¬</option>
        <option value="5000" data-price="500">5000 Ù…Ø´Ø§Ù‡Ø¯Ø© â€” 500 Ø¯.Ø¬ (Ø®ØµÙ…)</option>
      </select>`;
  } else if(productKey === 'discord-account'){
    modalTitle.textContent = 'Ø·Ù„Ø¨ Ø­Ø³Ø§Ø¨ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯';
    modalImg.src = 'https://i.pinimg.com/736x/ed/cb/56/edcb56a35853c07a7ba6348343470526.jpg';
    modalBody.innerHTML = `
      <div class="small-note">Ø§Ø®ØªØ± Ø¹Ù…Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø³Ù†Ø©)</div>
      <select id="yearsSelect" class="input">
        <option value="1" data-price="1000">1 Ø³Ù†Ø© â€” 1000 Ø¯.Ø¬</option>
        <option value="2" data-price="2000">2 Ø³Ù†ÙˆØ§Øª â€” 2000 Ø¯.Ø¬</option>
        <option value="3" data-price="3000">3 Ø³Ù†ÙˆØ§Øª â€” 3000 Ø¯.Ø¬</option>
        <option value="4" data-price="4000">4 Ø³Ù†ÙˆØ§Øª â€” 4000 Ø¯.Ø¬</option>
        <option value="5" data-price="5000">5 Ø³Ù†ÙˆØ§Øª â€” 5000 Ø¯.Ø¬</option>
        <option value="6" data-price="6000">6 Ø³Ù†ÙˆØ§Øª â€” 6000 Ø¯.Ø¬</option>
      </select>`;
  }
  productModal.classList.add('open');
  productModal.setAttribute('aria-hidden','false');
}

document.querySelectorAll('.order-btn').forEach(b=>{
  b.addEventListener('click', ()=> openProductModal(b.dataset.product));
});

q('#closeModal').addEventListener('click', ()=>{ productModal.classList.remove('open'); productModal.setAttribute('aria-hidden','true'); });
q('#cancel').addEventListener('click', ()=>{ productModal.classList.remove('open'); productModal.setAttribute('aria-hidden','true'); });

q('#confirmAdd').addEventListener('click', ()=>{
  if(!currentProduct) return;
  if(currentProduct === 'discord-account'){
    const sel = q('#yearsSelect');
    const years = Number(sel.value);
    const price = Number(sel.selectedOptions[0].dataset.price);
    addToCartItem('discord-acc-'+years, 'Ø­Ø³Ø§Ø¨ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ â€” ' + years + ' Ø³Ù†Ø©', price, q('#modalImg').src, 1);
  } else {
    const sel = q('#qtySelect');
    const qty = Number(sel.value);
    const price = Number(sel.selectedOptions[0].dataset.price);
    addToCartItem(currentProduct + '-' + qty, modalTitle.textContent + ' Ã— ' + qty, price, q('#modalImg').src, 1);
  }
  productModal.classList.remove('open'); productModal.setAttribute('aria-hidden','true');
  q('#cartSide').classList.add('open'); q('#cartSide').setAttribute('aria-hidden','false');
});

/* keyboard escape */
window.addEventListener('keydown', e=>{ if(e.key === 'Escape'){ productModal.classList.remove('open'); productModal.setAttribute('aria-hidden','true'); q('#cartSide').classList.remove('open'); } });

/* initialize */
renderCart();

/* ====== PAY Modal behavior: ØªØ¹Ø¨Ø¦Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙˆØ§Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± EmailJS ====== */
function closePayModal(){ q('#payModal').classList.remove('open'); q('#payModal').setAttribute('aria-hidden','true'); }

q('#checkout').addEventListener('click', function(){
  const cartItems = Object.values(cart);
  if(cartItems.length === 0){
    alert("âš ï¸ Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©ØŒ Ø£Ø¶Ù Ù…Ù†ØªØ¬Ø§Øª Ø£ÙˆÙ„Ø§Ù‹!");
    return;
  }
  const productNames = cartItems.map(i => i.title + (i.qty>1?(' Ã—'+i.qty):'')).join("ØŒ ");
  const total = cartItems.reduce((s,i)=> s + i.price*i.qty, 0);
  q('#prodName').value = productNames;
  q('#prodPrice').value = formatPrice(total);
  q('#payModal').classList.add('open'); q('#payModal').setAttribute('aria-hidden','false');
});

/* also allow opening pay modal via small show button */
q('#openPayInline').addEventListener('click', ()=>{ q('#cartSide').classList.add('open'); q('#cartSide').setAttribute('aria-hidden','false'); });

q('#payForm').addEventListener('submit', function(e){
  e.preventDefault();
  const name = this.name.value || '';
  const email = this.email.value || '';
  const method = this.method.value || '';
  const product_name = this.prodName.value || '';
  const product_price = this.prodPrice.value || '';

  // Send via EmailJS (uses your service/template IDs)
  emailjs.send("service_jae833s","template_ja011yl",{
    user_name: name,
    user_email: email,
    payment_method: method,
    product_name: product_name,
    product_price: product_price
  }).then(()=>{
    alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ù‹Ø§.");
    // Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­ Ù†ÙØ±Øº Ø§Ù„Ø³Ù„Ø© Ø§Ùˆ Ù†Ø­ØªÙØ¸ØŸ Ù‡Ù†Ø§ Ù†Ø®Ù„ÙŠÙ‡Ø§ ÙƒÙ…Ø§ Ù‡ÙŠ Ù„ÙƒÙ† Ù†Ù‚Ø¯Ø± Ù†ÙØ±ØºÙ‡Ø§:
    cart = {}; localStorage.removeItem('best_offers_cart'); renderCart();
    closePayModal();
  }, (err)=>{
    console.error(err);
    alert("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.");
  });
});

/* ====== Ø²Ø± ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© (Ù…Ù…ÙŠØ² Ø¨ØµØ±ÙŠÙ‹Ø§) ====== */
(function addClearButton(){
  const slot = q('#clearSlot');
  const clearBtn = document.createElement('button');
  clearBtn.innerHTML = 'ğŸ—‘ï¸ ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©';
  clearBtn.style = `
    width:100%;padding:12px;border:none;border-radius:10px;
    background:var(--danger);color:#fff;font-weight:900;cursor:pointer;margin-top:8px;
  `;
  clearBtn.onmouseenter = ()=> clearBtn.style.opacity = '0.92';
  clearBtn.onmouseleave = ()=> clearBtn.style.opacity = '1';
  clearBtn.onclick = ()=>{
    if(Object.values(cart).length === 0){ alert("Ø§Ù„Ø³Ù„Ø© Ø¨Ø§Ù„ÙØ¹Ù„ ÙØ§Ø±ØºØ©."); return; }
    if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ÙØ¹Ù„Ø§Ù‹ ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©ØŸ")){
      cart = {}; localStorage.removeItem('best_offers_cart'); renderCart();
      alert("ğŸ—‘ï¸ ØªÙ… ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!");
    }
  };
  slot.appendChild(clearBtn);
})();

/* Optional: small UX touch - close cart when clicking outside on small screens */
document.addEventListener('click', function(e){
  if(window.innerWidth < 740){
    if(!e.target.closest('.cart-side') && !e.target.closest('#cartBtn')){
      q('#cartSide').classList.remove('open');
    }
  }
});
</script>

</body>
</html>
